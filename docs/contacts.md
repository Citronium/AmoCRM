# Работа с контактами

## 1. Работа с отдельными контактами

### 1.1. Создание экземпляра контакта

```js
// аттрибуты по умолчанию
const attributes = {
  name: 'Контакт от 01.06.1998'
}
const lead = new crm.Lead( attributes );
// аналогично
const lead2 = crm.Lead.of( attributes );
```

### 1.2. Работа с параметрами контакта

Вы можете добавлять параметры сделки с помощью
свойств созданного объекта, а также с помощью функций

```js
const lead = new crm.Lead;

/* добавление и изменение свойств */
lead.name = 'Покупка пылесоса';
// аналогично
lead.setAttribute( 'name', 'Покупка пылесоса' );

/* получение свойств */
lead.name; // Покупка пылесоса
// аналогично
lead.getAttribute( 'name' ); // Покупка пылесоса

/* удаление свойств */
delete lead.name;
// аналогично
lead.removeAttribute( 'name' );
```

### 1.3 Сохранение данных

Данный метод добавляет сделку, если у неё не задан
атрибут id и обновляет её в противном случае.

```js
lead.save()
/* 
  self - текущая сделка,
  self === lead
 */
.then( self => {
  
}); 
```

В *save* можно передать новые атрибуты сделки.
Они добавятся к уже существующим атрибутам

```javascript
const lead = new Lead;

lead.save({
  name: 'Новая сделка',
  sale: 2000
});

console.log( lead.sale ); // 2000
```

### 1.4 Обновление данных с сервера

С течением времени данные сделки могут начать
расходиться с тем, что присутствует в вашей модели.

Метод *fetch()* обновляет атрибуты текущей сделки в случае,
если у неё задан атрибут *id*

```js
lead.fetch()
/* 
  self - текущая сделка,
  self === lead
 */
.then( self => {
  
}); 
```

### 1.5 Удаление (неофициально)

    Удаление сделок является недокументированной возможностью AmoCRM. 
    Использование данной возможности может быть рискованным, 
    так как в один день она просто может перестать работать 
    без объяснений со стороны AmoCRM.

Если вы увидите функционал нерабочим, пожалуйста, 
откройте в этом репозитории соответствующую дискуссию (через issue tracking).

```js
lead.remove()
/* 
  self - текущая сделка,
  self === lead
 */
.then( self => {
  
}); 
```
